<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Permanencia</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#3182ce"/>
    <link rel="icon" href="icons/icon-192x192.png">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="contenedor-test" class="contenedor-test">


        <!-- Menú de Inicio -->
        <div id="inicio-menu">
            <h1>Test de Permanencia</h1>
            <p>Elige un modo para comenzar</p>
            <div class="config-test-normal">
                <label for="num-preguntas-select">Preguntas por test:</label>
                <select id="num-preguntas-select">
                    <option value="10">10</option>
                    <option value="20" selected>20</option>
                    <option value="30">30</option>
                    <option value="50">50</option>
                </select>
            </div>
            <div class="footer-botones">
                <button id="iniciar-examen-2024-btn" class="menu-btn" data-action="examen-2024">Examen 2024</button>
                <button id="iniciar-examen-2022-btn" class="menu-btn" data-action="examen-2022">Examen 2022</button>
                <button id="iniciar-nuevo-test-btn" class="menu-btn btn-primario" data-action="nuevo-test">Nuevo Test</button>
                <button id="iniciar-repaso-fallos-btn" class="menu-btn btn-secundario" data-action="repasar-fallos">Repasar Fallos <span id="contador-fallos"></span></button>
                <button id="reiniciar-progreso-btn" class="menu-btn btn-terciario" data-action="reiniciar-progreso">Reiniciar Progreso</button>
            </div>
        </div>

        <!-- Contenido del Test (oculto al inicio) -->
        <div id="test-content" class="oculto">
            <div class="progreso-header">
            <div class="info-header">
                <div id="progreso-texto"></div>
                <div class="header-botones">
                    <button id="sound-toggle-btn" class="oculto" aria-label="Silenciar sonidos">🔊</button>
                </div>
                <div id="record-texto"></div>
            </div>
            <div class="barra-progreso-contenedor">
                <div id="barra-progreso"></div>
            </div>
            </div>
            <div id="pregunta-wrapper"> <!-- Contenedor para la animación -->
                <h2 id="pregunta-actual"></h2>
                <div id="opciones-respuesta" class="opciones"></div>
            </div>
            <div id="feedback" aria-live="polite"></div>
            <div id="revision-fallos" class="oculto"></div>
            <div class="footer-botones">
                <button id="finalizar-ahora-btn" class="oculto">Finalizar Test</button>
                <button id="seguir-mas-tarde-btn" class="oculto">Seguir más tarde</button>
                <button id="reiniciar-test" class="oculto">Menú Principal</button>
            </div>
        </div>
    </div>

    <!-- Modal de Confirmación (oculto por defecto) -->
    <div id="modal-overlay" class="oculto">
        <div id="confirmation-modal" class="modal" role="alertdialog" aria-modal="true" aria-labelledby="modal-title" aria-describedby="modal-message">
            <h3 id="modal-title"></h3>
            <p id="modal-message"></p>
            <div class="modal-actions">
                <button id="modal-cancel-btn" class="btn-secundario">Cancelar</button>
                <button id="modal-confirm-btn" class="btn-primario">Confirmar</button>
            </div>
        </div>
    </div>

    <!-- Banner de Actualización (oculto por defecto) -->
    <div id="update-banner" class="oculto">
        <span>Hay una nueva versión disponible.</span>
        <button id="update-now-btn">Actualizar</button>
    </div>

    <!-- Botón de tema fuera del flujo principal para posicionamiento fijo -->
    <button id="theme-toggle-btn" aria-label="Cambiar tema claro/oscuro"></button>

    <script type="module" src="app.js"></script>
</body>
</html>
